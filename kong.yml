_format_version: "3.0"
_transform: true

services:
- name: fastapi-auth-service
  url: http://fastapi-app:8000  # Service name from docker-compose
  
routes:
- name: public-routes
  service: fastapi-auth-service
  paths:
  - /health
  - /signup
  - /login
  - /docs
  - /openapi.json
  strip_path: false

- name: protected-routes
  service: fastapi-auth-service
  paths:
  - /me
  - /admin
  strip_path: false
  plugins:
  - name: jwt
    config:
      header_names:
      - authorization
      uri_param_names: []
      cookie_names: []
      key_claim_name: iss
      secret_is_base64: false
      claims_to_verify:
      - exp
      anonymous: null
      run_on_preflight: true

consumers:
- username: fastapi-app

jwt_secrets:
- consumer: fastapi-app
  key: fastapi-jwt-issuer
  secret: your-super-secret-key-change-in-production